{# app/templates/edit_profile.html (AVEC CONTAINER) #}
{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container mt-4 mb-5"> {# <<< Conteneur principal ajouté >>> #}
    <h1><i class="bi bi-person-gear"></i> {{ title }}</h1>
    <hr>

    {# Avertissement sur changement Pays/Appareil #}
    <div class="alert alert-warning" role="alert">
      <h4 class="alert-heading">{{ _('Attention lors de la modification du Pays ou de l\'Appareil !') }}</h4>
      <p>{{ _("Assurez-vous que le pays et l'appareil sélectionnés correspondent bien à votre situation actuelle.") }}</p>
      <hr>
      <p class="mb-0">{{ _("Utiliser un pays ou un appareil incorrect peut vous empêcher de voir des tâches disponibles et pourrait entraîner des problèmes lors de la validation de vos gains.") }}</p>
    </div>

    <div class="row g-5 mt-2"> {# Ajout marge top + g-5 pour plus d'espace entre colonnes #}
        {# Colonne pour Modifier le Profil #}
        <div class="col-md-6">
            <div class="card shadow-sm h-100"> {# Ajout carte #}
                <div class="card-body">
                    <h2 class="card-title mb-4">{{ _('Modifier mes Informations') }}</h2>
                    <form action="{{ url_for('main.profile') }}" method="post" novalidate>
                        {{ edit_form.hidden_tag() }} {# CSRF pour ce formulaire #}
                        <div class="mb-3"> {{ edit_form.full_name.label(class="form-label") }} {{ edit_form.full_name(class="form-control" + (" is-invalid" if edit_form.full_name.errors else "")) }} {% if edit_form.full_name.errors %}<div class="invalid-feedback">{% for error in edit_form.full_name.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %} </div>
                        <div class="mb-3"> {{ edit_form.email.label(class="form-label") }} {{ edit_form.email(class="form-control" + (" is-invalid" if edit_form.email.errors else "")) }} {% if edit_form.email.errors %}<div class="invalid-feedback">{% for error in edit_form.email.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %} </div>
                        <div class="mb-3"> {{ edit_form.phone_number.label(class="form-label") }} {{ edit_form.phone_number(class="form-control" + (" is-invalid" if edit_form.phone_number.errors else "")) }} </div>
                        <div class="mb-3"> {{ edit_form.country.label(class="form-label") }} {{ edit_form.country(class="form-select" + (" is-invalid" if edit_form.country.errors else "")) }} {% if edit_form.country.errors %}<div class="invalid-feedback">{% for error in edit_form.country.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %} </div>
                        <div class="mb-3"> {{ edit_form.device.label(class="form-label") }} {{ edit_form.device(class="form-select" + (" is-invalid" if edit_form.device.errors else "")) }} {% if edit_form.device.errors %}<div class="invalid-feedback">{% for error in edit_form.device.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %} </div>
                        <div class="d-grid"> {# Bouton pleine largeur #}
                            {{ edit_form.submit_profile(class="btn btn-primary") }}
                        </div>
                    </form>
                </div>
            </div>
        </div>

        {# Colonne pour Changer le Mot de Passe #}
        <div class="col-md-6">
             <div class="card shadow-sm h-100"> {# Ajout carte #}
                <div class="card-body">
                    <h2 class="card-title mb-4">{{ _('Changer mon Mot de Passe') }}</h2>
                     <form action="{{ url_for('main.profile') }}" method="post" novalidate>
                        {{ password_form.hidden_tag() }} {# CSRF pour ce formulaire #}
                        <div class="mb-3"> {{ password_form.current_password.label(class="form-label") }} {{ password_form.current_password(class="form-control" + (" is-invalid" if password_form.current_password.errors else "")) }} {% if password_form.current_password.errors %}<div class="invalid-feedback">{% for error in password_form.current_password.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %} </div>
                        <div class="mb-3"> {{ password_form.new_password.label(class="form-label") }} {{ password_form.new_password(class="form-control" + (" is-invalid" if password_form.new_password.errors else "")) }} {% if password_form.new_password.errors %}<div class="invalid-feedback">{% for error in password_form.new_password.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %} </div>
                        <div class="mb-3"> {{ password_form.new_password2.label(class="form-label") }} {{ password_form.new_password2(class="form-control" + (" is-invalid" if password_form.new_password2.errors else "")) }} {% if password_form.new_password2.errors %}<div class="invalid-feedback">{% for error in password_form.new_password2.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %} </div>
                        <div class="d-grid"> {# Bouton pleine largeur #}
                            {{ password_form.submit_password(class="btn btn-secondary") }}
                        </div>
                    </form>
                </div>
             </div>
        </div>
    </div>

     {# Lien retour #}
    <div class="mt-5 text-center"> {# Marge top augmentée #}
         <a href="{{ url_for('main.dashboard') }}" class="btn btn-outline-secondary"><i class="bi bi-arrow-left-circle"></i> {{ _('Retour au Tableau de Bord') }}</a>
    </div>

</div> {# <<< Fin Conteneur >>> #}
{% endblock %}
