{# app/admin/templates/create_task.html (AVEC CONTAINER) #}
{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container mt-4 mb-5"> {# <<< Conteneur ajouté >>> #}
    <h1>
        {% if is_edit %} <i class="bi bi-pencil-square"></i> {{ _('Modifier la Tâche') }} #{{ task_id }}
        {% else %} <i class="bi bi-plus-circle-fill"></i> {{ _('Créer une Nouvelle Tâche') }} {% endif %}
    </h1>
    <p> {% if is_edit %} {{ _('Modifiez les informations de la tâche ci-dessous.') }} {% else %} {{ _('Remplissez les informations ci-dessous pour ajouter une nouvelle tâche à la plateforme.') }} {% endif %} </p>
    <hr>

    <div class="row justify-content-center"> {# Centre le formulaire #}
        <div class="col-md-9 col-lg-8">
             <form action="" method="post" novalidate>
                {{ form.hidden_tag() }}
                {# Titre #}
                <div class="mb-3"> {{ form.title.label(class="form-label") }} {{ form.title(class="form-control" + (" is-invalid" if form.title.errors else "")) }} {% if form.title.errors %}<div class="invalid-feedback">{% for error in form.title.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %} </div>
                {# Description #}
                <div class="mb-3"> {{ form.description.label(class="form-label") }} {{ form.description(class="form-control" + (" is-invalid" if form.description.errors else "")) }} {% if form.description.errors %}<div class="invalid-feedback">{% for error in form.description.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %} </div>
                {# Instructions #}
                <div class="mb-3"> {{ form.instructions.label(class="form-label") }} {{ form.instructions(class="form-control" + (" is-invalid" if form.instructions.errors else "")) }} {% if form.instructions.errors %}<div class="invalid-feedback">{% for error in form.instructions.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %} </div>
                {# Lien Tâche (Optionnel) #}
                <div class="mb-3"> {{ form.task_link.label(class="form-label") }} {{ form.task_link(class="form-control" + (" is-invalid" if form.task_link.errors else "")) }} {% if form.task_link.errors %}<div class="invalid-feedback"> {% for error in form.task_link.errors %}<span>{{ error }}</span>{% endfor %} </div>{% endif %} </div>
                {# Récompense #}
                <div class="mb-3"> {{ form.reward_amount.label(class="form-label") }} <div class="input-group"> <span class="input-group-text">$</span> {{ form.reward_amount(class="form-control" + (" is-invalid" if form.reward_amount.errors else ""), type="number", step="0.01") }} </div> {% if form.reward_amount.errors %}<div class="invalid-feedback d-block">{% for error in form.reward_amount.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %} </div>
                {# Pays Cibles #}
                <div class="mb-3"> {{ form.target_countries.label(class="form-label") }}<br> <div class="form-control" style="height: 150px; overflow-y: scroll; border: 1px solid #ced4da; padding: .375rem .75rem;"> {{ form.target_countries }} </div> {% if form.target_countries.errors %}<div class="invalid-feedback d-block">{% for error in form.target_countries.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %} </div>
                {# Appareils Cibles #}
                <div class="mb-3"> {{ form.target_devices.label(class="form-label") }}<br> <div class="border p-2 rounded"> {{ form.target_devices }} </div> {% if form.target_devices.errors %}<div class="invalid-feedback d-block">{% for error in form.target_devices.errors %}<span>{{ error }}</span>{% endfor %}</div>{% endif %} </div>
                {# Actif ? #}
                <div class="mb-3 form-check"> {{ form.is_active(class="form-check-input") }} {{ form.is_active.label(class="form-check-label") }} </div>
                {# Bouton Submit conditionnel #}
                <div class="mb-3"> {% if is_edit %} {{ form.submit(value=_('Enregistrer les Modifications'), class="btn btn-primary") }} <a href="{{ url_for('admin.list_tasks') }}" class="btn btn-secondary">{{ _('Annuler') }}</a> {% else %} {{ form.submit(value=_('Créer la Tâche'), class="btn btn-success") }} {% endif %} </div>
            </form>
        </div>
    </div>
    <div class="mt-4"> <a href="{{ url_for('admin.list_tasks') if is_edit else url_for('admin.index') }}" class="btn btn-outline-secondary"><i class="bi bi-arrow-left-circle"></i> {{ _('Retour') }}</a> </div>
</div> {# <<< Fin Conteneur >>> #}
{% endblock %}
